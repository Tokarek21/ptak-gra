<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ptak vs My≈õliwi</title>
<style>
  body { margin:0; background:#222; display:flex; justify-content:center; }
  canvas { background:white; margin-top:20px; }
</style>
</head>
<body>

<canvas id="game" width="800" height="440"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const TILE = 40;

const maze = [
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
[1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,0,1],
[1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1,0,1],
[1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,0,1,0,1],
[1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1],
[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
];

let player = {x:1, y:1};
let hunters = [
  {x:18, y:1},
  {x:10, y:3},
  {x:15, y:5}
];

function drawMaze() {
  for (let y=0; y<maze.length; y++) {
    for (let x=0; x<maze[y].length; x++) {
      if (maze[y][x] === 1) {
        ctx.fillStyle = "green";
        ctx.fillRect(x*TILE, y*TILE, TILE, TILE);
      }
    }
  }
}

function drawPlayer() {
  ctx.fillStyle = "blue";
  ctx.fillRect(player.x*TILE+5, player.y*TILE+5, TILE-10, TILE-10);
}

function drawHunters() {
  ctx.fillStyle = "red";
  hunters.forEach(h => {
    ctx.fillRect(h.x*TILE+5, h.y*TILE+5, TILE-10, TILE-10);
  });
}

function moveHunter(h) {
  const dirs = [
    {x:1,y:0},{x:-1,y:0},
    {x:0,y:1},{x:0,y:-1}
  ];
  let dir = dirs[Math.floor(Math.random()*dirs.length)];
  let nx = h.x + dir.x;
  let ny = h.y + dir.y;
  if (maze[ny][nx] === 0) {
    h.x = nx;
    h.y = ny;
  }
}

document.addEventListener("keydown", e => {
  let nx = player.x;
  let ny = player.y;

  if (e.key === "ArrowLeft") nx--;
  if (e.key === "ArrowRight") nx++;
  if (e.key === "ArrowUp") ny--;
  if (e.key === "ArrowDown") ny++;

  if (maze[ny][nx] === 0) {
    player.x = nx;
    player.y = ny;
  }
});

function checkCollision() {
  for (let h of hunters) {
    if (h.x === player.x && h.y === player.y) {
      alert("GAME OVER");
      location.reload();
    }
  }
}

function gameLoop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawMaze();
  drawPlayer();
  drawHunters();
  hunters.forEach(moveHunter);
  checkCollision();
  setTimeout(gameLoop, 500);
}

gameLoop();
</script>

</body>
</html>
